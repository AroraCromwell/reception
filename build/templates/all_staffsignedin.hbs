<div class="container">
    <div class="row">
        <div class="col-md-12">
            <table id="datatable" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                <thead>
                <tr>
                    <th>UserId</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Sign In</th>
                    <th>Sign Out</th>
                    <th>image</th>
                    <th>Action</th>
                </tr>
                </thead>

                <tbody>
                {{#each data}}
                    <tr>
                        <td>{{staff_id}}</td>
                        <td>{{firstname}} {{surname}}</td>
                        <td>{{email}}</td>
                        <td>{{signin_time}}</td>
                        <td>{{signout_time}}</td>
                        <td><img src="https://reception.cromwell-tools.co.uk/images/{{staff_id}}.jpg" style="width: 125px;length:100px;"/></td>
                        <!--<td class="target text-center"><a class="btn btn-sm btn-primary" href="#" id="">SignOut</a></td>-->
                        <td  class ="target btn btn-primary btn-sm btn-space"  id="{{staff_id}}" href="" style="margin-top: 36px;margin-right: 10px;">Sign Me Out!</td>
                    </tr>
                {{/each}}

                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="/js/jquery-1.12.3.min.js" ></script>
<script>
    $(function() {
        $('#datatable').DataTable( {
            "order": [[ 5, "desc" ]]
        });
    });

    var chk = new Date();
    var month = chk.getMonth()+1;
    var myDate = [chk.getFullYear(), month <10 ? '0' + month : month , chk.getDate() < 10 ? '0' + chk.getDate() : chk.getDate()].join('-');
    var myTime = new Date().toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1");


    $(document).ready(function(){
        var table = $('#datatable').DataTable();
        $(".target").click(function(){
            var line = this;
            var contentPanelId = jQuery(this).attr("id");
            //alert(contentPanelId);
            $.ajax({
                url: '/visitors/'+contentPanelId,
                type: 'PUT',
                data: JSON.stringify({ "signout": myDate + ' ' + myTime}),
                contentType: 'application/json; charset=utf-8',
                success: function(response) {
                    //...
                    console.log(response.message);


                    table
                            .row( $(line).parents('tr') )
                            .remove()
                            .draw();
                },
                error: function () {
                    //your error code
                }
            });
        });
    });
</script>
